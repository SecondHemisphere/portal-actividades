<div class="card shadow-sm h-100">
  <!-- IMAGEN PRINCIPAL DE LA ACTIVIDAD -->
  @if(activity.photoUrl){
  <img
    [src]="activity.photoUrl"
    class="card-img-top"
    alt="Foto de la actividad"
    style="height: 180px; object-fit: cover"
  />
  } @else {
  <img
    src="/img/no-image-available.jpg"
    class="card-img-top"
    alt="Imagen no disponible"
    style="height: 180px; object-fit: cover; opacity: 0.6"
  />
  }

  <!-- TÍTULO + CATEGORÍA -->
  <div class="card-body d-flex flex-column">
    <div class="d-flex justify-content-between align-items-start">
      <h5 class="card-title text-primary">{{ activity.title }}</h5>
      <span class="badge bg-secondary">
        {{ getCategoryName(activity.categoryId) }}
      </span>
    </div>

    <!-- DESCRIPCIÓN RESUMIDA -->
    <p class="card-text text-muted small mt-2">{{ activity.description.substring(0, 80) }}...</p>

    <!-- LISTA DE DATOS PRINCIPALES -->
    <ul class="list-group list-group-flush small mt-2 mb-3 flex-grow-1">
      <!-- FECHA -->
      <li class="list-group-item d-flex align-items-center">
        <i class="bi bi-calendar me-2 text-primary"></i>
        <span>{{ activity.date | date : 'mediumDate' }}</span>
      </li>

      <!-- HORARIO -->
      <li class="list-group-item d-flex align-items-center">
        <i class="bi bi-clock me-2 text-primary"></i>
        <span>{{ activity.timeRange }}</span>
      </li>

      <!-- UBICACIÓN -->
      <li class="list-group-item d-flex align-items-center">
        <i class="bi bi-geo-alt me-2 text-primary"></i>
        <span>{{ activity.location }}</span>
      </li>

      <!-- ORGANIZADOR -->
      <li class="list-group-item d-flex align-items-center">
        <i class="bi bi-person-badge me-2 text-primary"></i>
        <span>Organiza: {{ getOrganizerName(activity.organizerId) }}</span>
      </li>
    </ul>

    <!-- CUPOS DISPONIBLES -->
    <div class="mt-auto d-flex justify-content-between align-items-center">
      @if (availableCapacity !== null && availableCapacity > 0) {
      <span class="text-secondary small"> Quedan {{ availableCapacity }} cupos </span>
      } @else if (availableCapacity === 0) {
      <span class="text-danger small">Cupos Agotados</span>
      }

      <!-- BOTÓN DE INSCRIPCIÓN -->
      <button
        class="btn btn-sm btn-primary"
        (click)="enrollClicked()"
        [disabled]="availableCapacity === 0 || isRegistrationClosed()"
      >
        @if (isRegistrationClosed()) { Inscripciones Cerradas } @else {
        <i class="bi bi-check-circle-fill me-1"></i> Inscribirme }
      </button>
    </div>
  </div>
</div>

<div class="container mt-4">
  <!-- TÍTULO + BUSCADOR -->
  <div class="d-flex flex-wrap align-items-center justify-content-between mb-4">
    <h2 class="mb-3 mb-md-0 text-primary">Catálogo de Actividades</h2>

    <div class="d-flex flex-wrap gap-3 align-items-center">
      <app-search-form [filters]="activityFilters" (onSearch)="searchActivities($event)">
      </app-search-form>

      <button
        class="btn btn-outline-secondary d-flex align-items-center gap-1"
        (click)="loadInitialData()"
      >
        <i class="bi bi-arrow-counterclockwise"></i>
        Reiniciar
      </button>
    </div>
  </div>

  <hr />

  <!-- PAGINACIÓN -->
  <div class="mt-4 d-flex justify-content-center">
    <app-pagination-controls
      [totalData]="filteredActivities"
      [pageSizeOptions]="[6, 9, 12, 18, 24]"
      (pagedDataChange)="pagedData = $event"
    >
      <!-- MENSAJE SI NO HAY RESULTADOS -->
      @if (filteredActivities.length === 0) {
      <div class="text-center mt-5 mensaje-vacio">
        <i class="bi bi-search icono-vacio"></i>
        <p class="texto-vacio">No se encontraron resultados para tu búsqueda.</p>
      </div>
      } @else {

      <!-- LISTADO DE CARDS -->
      <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        @for (activity of pagedData; track activity.id) {
        <div class="col">
          <app-activity-card
            [activity]="activity"
            [categories]="categories"
            [organizers]="organizers"
            [availableCapacity]="getAvailableCapacity(activity)"
            (onEnroll)="enrollInActivity($event)"
          >
          </app-activity-card>
        </div>
        }
      </div>

      }
    </app-pagination-controls>
  </div>
</div>
